\documentclass{article}
\usepackage[paperwidth=17in,paperheight=8.5in,margin=1in]{geometry}
\usepackage[autocompile]{gregoriotex}

\usepackage{fontspec}
\usepackage{gregoriotex}

\setmainfont[
    Path = ../../../fonts/ ,
    Extension = .otf ,
    UprightFont = *-Regular ,
    UprightFeatures = { SmallCapsFont = *SC-Regular } ,
    BoldFont = *-Bold ,
    BoldFeatures = { SmallCapsFont = *SC-Bold } ,
    ItalicFont = *-Italic ,
    ItalicFeatures = { SmallCapsFont = *SC-Italic } ,
    BoldItalicFont = *-BoldItalic ,
    BoldItalicFeatures = { SmallCapsFont = *SC-BoldItalic } ,
    Ligatures = TeX
]{Alegreya}

\begin{document}

\bigskip

\begin{tabular}{p{4.1in}p{4.06in}p{4.07in}}
  Score 4971 from GregoBase, with line breaks inserted to match the original printed source. Every B is flatted (te); for example, the flat on \emph{pervia} extends to the end of the line, so the B in \emph{porta} is flatted. &
  Without explicit line breaks, the B in \emph{stella} should be flatted, but is not. &
  If the width is changed slightly, the B in \emph{stella} is correct, but the B in \emph{Virgo} is incorrect.
\\
\gregorioscore{alma-correct}%
&
\gregorioscore{alma-original}%
&
\gregorioscore{alma-original}%
\end{tabular}

\end{document}
