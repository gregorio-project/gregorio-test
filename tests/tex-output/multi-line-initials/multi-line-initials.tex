% !TEX TS-program = lualatex
% !TEX encoding = UTF-8

% This is a simple template for a LuaLaTeX document using gregorio scores.

\documentclass[11pt]{article} % use larger type; default would be 10pt

% usual packages loading:
\usepackage{fontspec}
\usepackage{geometry} % See geometry.pdf to learn the layout options. There are lots.
\geometry{a4paper} % or letterpaper (US) or a5paper or....
\usepackage[allowdeprecated=false,autocompile]{gregoriotex} % for gregorio score inclusion
\setmainfont[
    Path = ../../../fonts/ ,
    Extension = .otf ,
    UprightFont = *-Regular ,
    UprightFeatures = { SmallCapsFont = *SC-Regular } ,
    BoldFont = *-Bold ,
    BoldFeatures = { SmallCapsFont = *SC-Bold } ,
    ItalicFont = *-Italic ,
    ItalicFeatures = { SmallCapsFont = *SC-Italic } ,
    BoldItalicFont = *-BoldItalic ,
    BoldItalicFeatures = { SmallCapsFont = *SC-BoldItalic } ,
    Ligatures = TeX
]{Alegreya}

% here we begin the document
\listfiles
\begin{document}
First a series of scores which have manual line-breaks in them.  This demonstrates what happens to scores which were previously typeset under the old system where manual line breaks were necessary for 2-line initials.

\gresetinitiallines{0}
\gregorioscore{PopulusSion.gabc}

\newpage
Lorem ipsum dolor sit amet, consectetur adipiscing elit. Ut vitae ipsum ultrices ligula dignissim tempor. Nullam id placerat arcu, quis congue odio. Sed eu nunc varius, facilisis est non, dapibus nisl. Suspendisse potenti. Ut dictum massa non semper semper. Sed ligula nisl, viverra sed accumsan eget, tempor vitae mi. Ut tincidunt quam commodo, scelerisque ex a, consequat nunc. Duis suscipit tellus eget leo posuere imperdiet.
\grechangestyle{initial}{\fontsize{40}{40}\selectfont}
\gresetinitiallines{1}
\gregorioscore{PopulusSion.gabc}

\newpage
Lorem ipsum dolor sit amet, consectetur adipiscing elit. Ut vitae ipsum ultrices ligula dignissim tempor. Nullam id placerat arcu, quis congue odio. Sed eu nunc varius, facilisis est non, dapibus nisl. Suspendisse potenti. Ut dictum massa non semper semper. Sed ligula nisl, viverra sed accumsan eget, tempor vitae mi. Ut tincidunt quam commodo, scelerisque ex a, consequat nunc. Duis suscipit tellus eget leo posuere imperdiet.
\gresetinitiallines{2}
\grechangestyle{initial}{\fontsize{120}{60}\selectfont}
\gregorioscore{PopulusSion.gabc}

\newpage
Now a series of scores with all manual line-breaks removed, demonstrating the power of the new feature
\gresetinitiallines{0}
\gregorioscore{PopulusSion_new.gabc}

\newpage
Lorem ipsum dolor sit amet, consectetur adipiscing elit. Ut vitae ipsum ultrices ligula dignissim tempor. Nullam id placerat arcu, quis congue odio. Sed eu nunc varius, facilisis est non, dapibus nisl. Suspendisse potenti. Ut dictum massa non semper semper. Sed ligula nisl, viverra sed accumsan eget, tempor vitae mi. Ut tincidunt quam commodo, scelerisque ex a, consequat nunc. Duis suscipit tellus eget leo posuere imperdiet.
\grechangestyle{initial}{\fontsize{40}{40}\selectfont}
\gresetinitiallines{1}
\gregorioscore{PopulusSion_new.gabc}

\newpage
Lorem ipsum dolor sit amet, consectetur adipiscing elit. Ut vitae ipsum ultrices ligula dignissim tempor. Nullam id placerat arcu, quis congue odio. Sed eu nunc varius, facilisis est non, dapibus nisl. Suspendisse potenti. Ut dictum massa non semper semper. Sed ligula nisl, viverra sed accumsan eget, tempor vitae mi. Ut tincidunt quam commodo, scelerisque ex a, consequat nunc. Duis suscipit tellus eget leo posuere imperdiet.
\grechangestyle{initial}{\fontsize{120}{60}\selectfont}
\gresetinitiallines{2}
\gregorioscore{PopulusSion_new.gabc}

\newpage
Lorem ipsum dolor sit amet, consectetur adipiscing elit. Ut vitae ipsum ultrices ligula dignissim tempor. Nullam id placerat arcu, quis congue odio. Sed eu nunc varius, facilisis est non, dapibus nisl. Suspendisse potenti. Ut dictum massa non semper semper. Sed ligula nisl, viverra sed accumsan eget, tempor vitae mi. Ut tincidunt quam commodo, scelerisque ex a, consequat nunc. Duis suscipit tellus eget leo posuere imperdiet.
\grechangestyle{initial}{\fontsize{180}{40}\selectfont}
\gresetinitiallines{3}
\gregorioscore{PopulusSion_new.gabc}


\end{document}
